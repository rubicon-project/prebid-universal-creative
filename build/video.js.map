{"version":3,"sources":["webpack:///webpack/bootstrap 69045e57f2e4c0e5933a","webpack:///./src/utils.js","webpack:///./src/domHelper.js","webpack:///./src/creative.js","webpack:///./src/renderingManager.js","webpack:///./src/environment.js","webpack:///./src/messaging.js"],"names":["triggerPixel","url","done","img","Image","addEventListener","src","createTrackPixelHtml","escapedUrl","encodeURI","writeAdUrl","adUrl","width","height","iframe","domHelper","document","body","appendChild","sendRequest","callback","reqListener","oReq","responseText","XMLHttpRequest","open","send","getUUID","d","Date","getTime","uuid","replace","c","r","Math","random","floor","toString","loadScript","currentWindow","tagSrc","successCallback","errorCallback","doc","scriptTag","createElement","type","readyState","onreadystatechange","onload","onerror","elToAppend","getElementsByTagName","length","insertBefore","firstChild","getCreativeComment","bid","createComment","crid","getCreativeCommentMarkup","creativeComment","wrapper","innerHTML","transformAuctionTargetingData","tagData","auctionKeyMap","hb_adid","hb_cache_host","hb_cache_path","hb_cache_id","hb_format","hb_env","hb_size","hb_pb","isMacroPresent","paramName","isPlainObject","Object","keys","isStr","convertTargetingMapToNormalMap","tarMap","newTarMap","forEach","key","Array","isArray","convertKeyPairStringToMap","keywordsStr","keywordsMap","keywordsArr","split","keyPairStr","keyPairArr","k","v","renameKnownAuctionKeys","adServerKeyMap","internalKey","auctionData","formattedKeyMap","targetingMap","targetingKeywords","parseUrl","parsed","href","decodeURIComponent","protocol","hostname","port","pathname","hash","host","window","location","isA","object","_t","prototype","call","getEmptyIframe","frame","setAttribute","insertElement","elm","target","e","ucTag","renderAd","renderBannerOrDisplayAd","dataObject","targetingData","canLocatePrebid","renderCrossDomain","adId","adServerDomain","pubUrl","renderLegacy","w","i","parent","pbjs","win","pubAdServerDomain","windowLocation","fullAdServerDomain","sendMessage","prebidMessenger","ev","message","adObject","JSON","parse","ad","mediaType","signalRenderResult","reason","console","log","contentDocument","write","close","style","display","overflow","success","payload","event","info","requestAdFromPrebid","isAmp","isCrossDomain","isSafeFrame","$sf","ext","top","canInspectWindow","result","isMobileApp","env","publisherURL","prebidDomain","parsedUrl","onResponse","Error","stringify","messagePort","postMessage","channel","MessageChannel","port1","onmessage","windowListener","port2","stopListening","removeEventListener","origin","originalEvent"],"mappings":"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","file":"video.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 69045e57f2e4c0e5933a","import * as domHelper from './domHelper';\n\n/**\n * Inserts an image pixel with the specified `url` for cookie sync\n * @param {string} url URL string of the image pixel to load\n * @param  {function} [done] an optional exit callback, used when this usersync pixel is added during an async process\n */\nexport function triggerPixel(url, done) {\n  const img = new Image();\n  if (done && typeof done === 'function') {\n    img.addEventListener('load', done);\n    img.addEventListener('error', done);\n  }\n  img.src = url;\n}\n\nexport function createTrackPixelHtml(url) {\n  if (!url) {\n    return '';\n  }\n\n  let escapedUrl = encodeURI(url);\n  let img = `<div style=\"position:absolute;left:0px;top:0px;visibility:hidden;\"><img src=\"${escapedUrl}\"></div>`;\n  return img;\n}\n\nexport function writeAdUrl(adUrl, width, height) {\n  let iframe = domHelper.getEmptyIframe(height, width);\n  iframe.src = adUrl;\n  document.body.appendChild(iframe);\n}\n\nexport function sendRequest(url, callback) {\n  function reqListener() {\n    callback(oReq.responseText);\n  }\n\n  let oReq = new XMLHttpRequest();\n  oReq.addEventListener('load', reqListener);\n  oReq.open('GET', url);\n  oReq.send();\n}\n\nexport function getUUID() {\n  let d = new Date().getTime();\n  let uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    let r = (d + Math.random() * 16) % 16 | 0;\n    d = Math.floor(d / 16);\n    return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n  });\n  return uuid;\n};\n\nexport function loadScript(currentWindow, tagSrc, successCallback, errorCallback) {\n  let doc = currentWindow.document;\n  let scriptTag = doc.createElement('script');\n  scriptTag.type = 'text/javascript';\n\n  // Execute success callback if necessary\n  if (successCallback && typeof successCallback === 'function') {\n    if (scriptTag.readyState) {\n      scriptTag.onreadystatechange = function() {\n        if (scriptTag.readyState === 'loaded' || scriptTag.readyState === 'complete') {\n          scriptTag.onreadystatechange = null;\n          successCallback();\n        }\n      };\n    } else {\n      scriptTag.onload = function() {\n        successCallback();\n      };\n    }\n  }\n\n  // Execute error callback if necessary\n  if (errorCallback && typeof errorCallback === 'function') {\n    scriptTag.onerror = function() {\n      errorCallback();\n    };\n  }\n\n  scriptTag.src = tagSrc;\n\n  //add the new script tag to the page\n  let elToAppend = doc.getElementsByTagName('head');\n  elToAppend = elToAppend.length ? elToAppend : doc.getElementsByTagName('body');\n  if (elToAppend.length) {\n    elToAppend = elToAppend[0];\n    elToAppend.insertBefore(scriptTag, elToAppend.firstChild);\n  }\n\n  return scriptTag;\n};\n\n/**\n * Return comment element\n * @param {*} bid\n */\nexport function getCreativeComment(bid) {\n  return document.createComment(`Creative ${bid.crid} served by Prebid.js Header Bidding`);\n}\n\n/**\n * Returns comment element markup\n * @param {*} bid\n */\nexport function getCreativeCommentMarkup(bid) {\n  let creativeComment = getCreativeComment(bid);\n  let wrapper = document.createElement('div');\n  wrapper.appendChild(creativeComment);\n  return wrapper.innerHTML;\n}\n\nexport function transformAuctionTargetingData(tagData) {\n  // this map object translates the Prebid.js auction keys to their equivalent Prebid Universal Creative keys\n  // when the publisher uses their adserver's generic macro that provides all targeting keys (ie tagData.targetingMap), we need to convert the keys\n  const auctionKeyMap = {\n    hb_adid: 'adId',\n    hb_cache_host: 'cacheHost',\n    hb_cache_path: 'cachePath',\n    hb_cache_id: 'uuid',\n    hb_format: 'mediaType',\n    hb_env: 'env',\n    hb_size: 'size',\n    hb_pb: 'hbPb'\n  };\n\n  /**\n   * Determine if the supplied property of the tagData object exists and is populated with its own values/properties according to its type\n   * @param {string} paramName name of the property to check (eg tagData.targetingMap)\n   * @returns true/false\n   */\n  function isMacroPresent(paramName) {\n    return !!(\n      tagData[paramName] && (\n        (isPlainObject(tagData[paramName]) && Object.keys(tagData[paramName]).length > 0) ||\n        (isStr(tagData[paramName]) && tagData[paramName] !== '')\n      )\n    );\n  }\n\n  /**\n   * Converts the specifically formatted object of keypairs to a more generalized structure\n   * It specifically extracts the keyvalue from an array and stores it as a normal string\n   * @param {object} tarMap object of keys with the keyvalue stored in an array; eg {\"hb_adid\":[\"26566ee8c7f251\"], ...}\n   * @returns {object} result is an object map like the following: {\"hb_cache_id\":\"123456\", \"other_key\":\"other_value\", ...}\n   */\n  function convertTargetingMapToNormalMap(tarMap) {\n    let newTarMap = {};\n\n    Object.keys(tarMap).forEach(function(key) {\n      if (Array.isArray(tarMap[key]) && tarMap[key].length > 0) {\n        newTarMap[key] = tarMap[key][0];\n      }\n    });\n    return newTarMap;\n  }\n\n  /**\n   * Converts a specifically formatted string of keypairs to a specifically formatted object map\n   * @param {String} keywordsStr string of keypairs; eg \"hb_cache_id:123456,other_key:other_value\"\n   * @returns {object} result is an object map like the following: {\"hb_cache_id\":\"123456\", \"other_key\":\"other_value\", ...}\n   */\n  function convertKeyPairStringToMap(keywordsStr) {\n    let keywordsMap = {};\n    const keywordsArr = keywordsStr.split(',');\n\n    if (keywordsArr.length > 0) {\n      keywordsArr.forEach(function(keyPairStr) {\n        let keyPairArr = keyPairStr.split(':');\n        if (keyPairArr.length === 2) {\n          let k = keyPairArr[0];\n          let v = keyPairArr[1];\n          keywordsMap[k] = v;\n        }\n      });\n    }\n    return keywordsMap;\n  }\n\n  /**\n   * Rename key if it's part of the auctionKeyMap object; if not, leave key as is\n   * Store the resultant keypair in the auctionData object for later use in renderingManager.renderAd()\n   * @param {object} adServerKeyMap incoming object map of the auction keys from the UC tag; eg {'key1':'value1', 'key2':'value2', ...}\n   */\n  function renameKnownAuctionKeys(adServerKeyMap) {\n    Object.keys(adServerKeyMap).forEach(function(key) {\n      let internalKey = auctionKeyMap[key] || key;\n      auctionData[internalKey] = adServerKeyMap[key];\n    });\n  }\n\n  let auctionData = {};\n  let formattedKeyMap = {};\n\n  if (isMacroPresent('targetingMap')) {\n    formattedKeyMap = convertTargetingMapToNormalMap(tagData.targetingMap);\n  } else if (isMacroPresent('targetingKeywords')) {\n    formattedKeyMap = convertKeyPairStringToMap(tagData.targetingKeywords);\n  }\n  renameKnownAuctionKeys(formattedKeyMap);\n\n  // set keys not in defined map macros (eg targetingMap) and/or the keys setup within a non-DFP adserver\n  Object.keys(tagData).forEach(function (key) {\n    if (key !== 'targetingMap' && key !== 'targetingKeywords' && isStr(tagData[key]) && tagData[key] !== '') {\n      auctionData[key] = tagData[key];\n    }\n  });\n  return auctionData;\n}\n\nexport function parseUrl(url) {\n  let parsed = document.createElement('a');\n\n  parsed.href = decodeURIComponent(url);\n\n  return {\n    href: parsed.href,\n    protocol: (parsed.protocol || '').replace(/:$/, ''),\n    hostname: parsed.hostname,\n    port: +parsed.port,\n    pathname: parsed.pathname.replace(/^(?!\\/)/, '/'),\n    hash: (parsed.hash || '').replace(/^#/, ''),\n    host: (parsed.host || window.location.host).replace(/:(443|80)$/, '')\n  };\n}\n\nfunction isA(object, _t) {\n  return Object.prototype.toString.call(object) === '[object ' + _t + ']';\n};\n\nfunction isPlainObject(object) {\n  return isA(object, 'Object');\n}\n\nfunction isStr(object) {\n  return isA(object, 'String');\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","/**\n * domHelper: a collection of helpful dom things\n */\n\n\n/**\n * returns a empty iframe element with specified height/width\n * @param {Number} height height iframe set to \n * @param {Number} width width iframe set to\n * @returns {Element} iframe DOM element \n */\nexport function getEmptyIframe(height, width) {\n    let frame = document.createElement('iframe');\n    frame.setAttribute('frameborder', 0);\n    frame.setAttribute('scrolling', 'no');\n    frame.setAttribute('marginheight', 0);\n    frame.setAttribute('marginwidth', 0);\n    frame.setAttribute('TOPMARGIN', 0);\n    frame.setAttribute('LEFTMARGIN', 0);\n    frame.setAttribute('allowtransparency', 'true');\n    frame.setAttribute('width', width);\n    frame.setAttribute('height', height);\n    return frame;\n  }\n\n  /**\n * Insert element to passed target\n * @param {object} elm\n * @param {object} doc\n * @param {string} target\n */\nexport function insertElement(elm, doc, target) {\n    doc = doc || document;\n    let elToAppend;\n    if (target) {\n      elToAppend = doc.getElementsByTagName(target);\n    } else {\n      elToAppend = doc.getElementsByTagName('head');\n    }\n    try {\n      elToAppend = elToAppend.length ? elToAppend : doc.getElementsByTagName('body');\n      if (elToAppend.length) {\n        elToAppend = elToAppend[0];\n        elToAppend.insertBefore(elm, elToAppend.firstChild);\n      }\n    } catch (e) {}\n  }\n\n\n// WEBPACK FOOTER //\n// ./src/domHelper.js","/**\n * creative.js\n *\n * This file is inserted into the prebid creative as a placeholder for the winning prebid creative. It should support the following formats:\n * - Banner\n * - Outstream Video\n * - All safeFrame creatives\n */\n\nimport { renderBannerOrDisplayAd } from './renderingManager';\n\nwindow.ucTag = (window.ucTag || {});\n\nwindow.ucTag.renderAd = renderBannerOrDisplayAd;\n\n\n\n// WEBPACK FOOTER //\n// ./src/creative.js","import { parseUrl, transformAuctionTargetingData } from './utils';\nimport { canLocatePrebid } from './environment';\nimport { insertElement, getEmptyIframe } from './domHelper';\nimport {prebidMessenger} from './messaging.js';\n\nexport function renderBannerOrDisplayAd(doc, dataObject) {\n  const targetingData = transformAuctionTargetingData(dataObject);\n\n  if (!canLocatePrebid(window)) {\n    renderCrossDomain(window, targetingData.adId, targetingData.adServerDomain, targetingData.pubUrl);\n  } else {\n    renderLegacy(doc, targetingData.adId);\n  }\n}\n\n/**\n * Calls prebid.js renderAd function to render ad\n * @param {Object} doc Document\n * @param {string} adId Id of creative to render\n */\nexport function renderLegacy(doc, adId) {\n  let w = window;\n  for (let i = 0; i < 10; i++) {\n    w = w.parent;\n    if (w.pbjs) {\n      try {\n        w.pbjs.renderAd(doc, adId);\n        break;\n      } catch (e) {\n        continue;\n      }\n    }\n  }\n}\n\n/**\n * Render ad in safeframe using postmessage\n * @param {string} adId Id of creative to render\n * @param {string} pubAdServerDomain publisher adserver domain name\n * @param {string} pubUrl Url of publisher page\n */\nexport function renderCrossDomain(win, adId, pubAdServerDomain = '', pubUrl) {\n  let windowLocation = win.location;\n  let adServerDomain = pubAdServerDomain || win.location.hostname;\n  let fullAdServerDomain = windowLocation.protocol + '//' + adServerDomain;\n  const sendMessage = prebidMessenger(pubUrl, win);\n\n  function renderAd(ev) {\n    let key = ev.message ? \"message\" : \"data\";\n    let adObject = {};\n    try {\n      adObject = JSON.parse(ev[key]);\n    } catch (e) {\n      return;\n    }\n\n    if (\n      adObject.message &&\n      adObject.message === \"Prebid Response\" &&\n      adObject.adId === adId\n    ) {\n      try {\n        let body = win.document.body;\n        let ad = adObject.ad;\n        let url = adObject.adUrl;\n        let width = adObject.width;\n        let height = adObject.height;\n\n        if (adObject.mediaType === \"video\") {\n          signalRenderResult(false, {\n            reason: \"preventWritingOnMainDocument\",\n            message: `Cannot render video ad ${adId}`,\n          });\n          console.log(\"Error trying to write ad.\");\n        } else if (ad) {\n          const iframe = getEmptyIframe(adObject.height, adObject.width);\n          body.appendChild(iframe);\n          iframe.contentDocument.open();\n          iframe.contentDocument.write(ad);\n          iframe.contentDocument.close();\n          signalRenderResult(true);\n        } else if (url) {\n          const iframe = getEmptyIframe(height, width);\n          iframe.style.display = \"inline\";\n          iframe.style.overflow = \"hidden\";\n          iframe.src = url;\n\n          insertElement(iframe, document, \"body\");\n          signalRenderResult(true);\n        } else {\n          signalRenderResult(false, {\n            reason: \"noAd\",\n            message: `No ad for ${adId}`,\n          });\n          console.log(\n            `Error trying to write ad. No ad markup or adUrl for ${adId}`\n          );\n        }\n      } catch (e) {\n        signalRenderResult(false, { reason: \"exception\", message: e.message });\n        console.log(`Error in rendering ad`, e);\n      }\n    }\n\n    function signalRenderResult(success, { reason, message } = {}) {\n      const payload = {\n        message: \"Prebid Event\",\n        adId,\n        event: success ? \"adRenderSucceeded\" : \"adRenderFailed\",\n      };\n      if (!success) {\n        payload.info = { reason, message };\n      }\n      sendMessage(payload);\n    }\n  }\n\n  function requestAdFromPrebid() {\n    let message = {\n      message: 'Prebid Request',\n      adId: adId,\n      adServerDomain: fullAdServerDomain\n    }\n    sendMessage(message, renderAd);\n  }\n\n  requestAdFromPrebid();\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/renderingManager.js","/***************************************\n * Detect Environment Helper Functions\n ***************************************/\n\n/**\n * Functions to detect below environments:\n *  Amp: google Accelerate Mobile Pages ampproject.org\n *  SafeFrame: SafeFrame\n *  CrossDomain: An iframe that can't get to the top window\n *  Mobile App: function to detect mobile app environment\n */\n\n/**\n * @param {String} uuid key value from auction, contains the cache id of the winning bid stored in prebid cache\n * @returns true if there is an AMP context object\n */\nexport function isAmp(uuid, win) {\n  // TODO Use amp context once it is available in cross domain\n  // https://github.com/ampproject/amphtml/issues/6829\n  return typeof uuid === 'string' && uuid !== \"\" && isCrossDomain(win);\n}\n\n/**\n * @returns true if the environment is a SafeFrame.\n */\nexport function isSafeFrame(win) {\n  return !!(win.$sf && win.$sf.ext);\n}\n\n/**\n  * Return true if we are in an iframe and can't access the top window.\n  * @returns true if the environment is a Cross Domain\n  */\nexport function isCrossDomain(win) {\n  return win.top !== win && !canInspectWindow(win);\n}\n\n/**\n * Returns true if win's properties can be accessed and win is defined.\n * This functioned is used to determine if a window is cross-domained\n * from the perspective of the current window.\n * @param {!Window} win\n * @return {boolean}\n */\nexport function canInspectWindow(win) {\n  try {\n    // force an exception in x-domain environments. #1509\n    win.top.location.toString();\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Returns true if we can find the prebid global object (eg pbjs) as we\n * climb the accessible windows.  Return false if it's not found.\n * @returns {boolean}\n */\nexport function canLocatePrebid(win) {\n  let result = false;\n  let currentWindow = win;\n\n  while (!result) {\n    try {\n      if (currentWindow.pbjs) {\n        result = true;\n        break;\n      }\n    } catch (e) { }\n    if (currentWindow === window.top) break;\n\n    currentWindow = currentWindow.parent;\n  }\n  return result;\n}\n\n/**\n * @param {String} env key value from auction, indicates the environment where tag is served\n * @returns true if env exists and is equal to the string 'mobile-app'\n */\nexport function isMobileApp(env) {\n  return env && env === 'mobile-app';\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/environment.js","import {parseUrl} from './utils.js';\n\nexport function prebidMessenger(publisherURL, win = window) {\n    const prebidDomain = (() => {\n        if (publisherURL == null) {\n            return null;\n        }\n        const parsedUrl = parseUrl(publisherURL);\n        return parsedUrl.protocol + '://' + parsedUrl.host;\n    })();\n\n    return function sendMessage(message, onResponse) {\n        if (prebidDomain == null) {\n            throw new Error('Missing pubUrl')\n        }\n        message = JSON.stringify(message);\n        let messagePort;\n        if (onResponse == null) {\n            win.parent.postMessage(message, prebidDomain);\n        } else {\n            const channel = new MessageChannel();\n            messagePort = channel.port1;\n            messagePort.onmessage = onResponse;\n            win.addEventListener('message', windowListener);\n            win.parent.postMessage(message, prebidDomain, [channel.port2]);\n        }\n\n        return function stopListening() {\n            if (messagePort != null) {\n                win.removeEventListener('message', windowListener);\n                messagePort.onmessage = null;\n                messagePort = null;\n            }\n        }\n\n        function windowListener(ev) {\n            if ((ev.origin || (ev.originalEvent && ev.originalEvent.origin)) === prebidDomain) {\n                onResponse(ev);\n            }\n        }\n\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/messaging.js"],"sourceRoot":""}